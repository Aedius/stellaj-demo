<html>
<head>
    <script>

        function postAjax(url, success, error) {

            var xhr = new XMLHttpRequest();
            xhr.open('POST', url);
            xhr.onreadystatechange = function() {
                if (xhr.readyState>3 && xhr.status==200) { success(xhr.responseText); }
                if (xhr.readyState>3 && xhr.status==500) { error(xhr.responseText); }
            };
            xhr.addEventListener('error', function(e){
                console.log(e)
            });
            xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');
            xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
            xhr.send()
            return xhr;
        }

        postAjax(location.href,
            function(data){
                var json = JSON.parse(data);
                console.log(json)
           },
           function(data){
                alert('error');
           }
        );
    </script>
</head>
<body>
connecting ...
</body>